LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;

ENTITY FLIP_FLOP_D IS
PORT(CLOCK, CLEAR, ENTRADA, ANTERIOR REF: IN STD_LOGIC;
	 Q, NQ: INOUT STD_LOGIC;
END ENTITY;

ARCHITECTURE A_FLIP_FLOP_D OF FLIP_FLOP_D IS
BEGIN
	PROCESS(CLOCK, ANTERIOR, CLEAR, ENTRADA)
    BEGIN
        IF (CLOCK'EVENT AND CLOCK='1') THEN
            IF (ANTERIOR = '0') THEN
                Q <= '1'
                NQ <= '0'
            ELSE
                Q <= ENTRADA;
                NQ <= NOT ENTRADA;
            END IF;
        ELSE IF (CLEAR='0') THEN
            Q <='0';
            NQ <= '1';
        END IF;
    END PROCESS;
END A_FLIP_FLOP_D;